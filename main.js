!function(){"use strict";class e{constructor(e,t,s,i,r){let{name:n,link:a,_id:o,handleDeleteClick:l,isLiked:d,handleLikeCard:c}=e;this._name=n,this._link=a,this._id=o,this._handleDeleteClick=l,this._handleLikeCard=c,this._cardSelector=t,this._handleImageClick=s,this._api=i,this._isLiked=d,this._confirmationModal=r}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteButton.addEventListener("click",(()=>{this._confirmationModal.open(this._cardElement,this._id)})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._handleLikeCard(this._id,this._isLiked).then((()=>{this._isLiked=!this._isLiked,this._likeButton.classList.toggle("card__like-button_active")})).catch((e=>{console.error(e)}))}_handleDeleteCard(){this._cardElement.remove()}_getTemplate(){return this._cardSelector.content.querySelector(".card__list-item").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardNameEl=this._cardElement.querySelector(".card__description-text"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardNameEl.textContent=this._name,this._isLiked&&this._likeButton.classList.add("card__like-button_active"),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls=[...this._form.querySelectorAll(this._inputSelector)]}_toggleInputError(e){const t=this._form.querySelector(`#${e.id}-error`),s=e.validity.valid;e.classList.toggle(this._inputErrorClass,!s),t.classList.toggle(this._errorClass,!s),t.textContent=s?"":e.validationMessage}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){const e=this._hasInvalidInput();this._submitButton.classList.toggle(this._inactiveButtonClass,e),this._submitButton.disabled=e}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._toggleInputError(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState()}}class s{constructor(e){let{modalSelector:t}=e;this._modalElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._handleOverlayClose=this._handleOverlayClose.bind(this)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),this._modalElement.addEventListener("click",this._handleOverlayClose)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),this._modalElement.removeEventListener("click",this._handleOverlayClose)}_handleOverlayClose(e){e.target.classList.contains("modal")&&this.close()}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._modalElement.querySelectorAll(".modal__close").forEach((e=>{e.addEventListener("click",(()=>this.close()))}))}}var i=class extends s{constructor(e,t){super({modalSelector:e}),this._submitButton=this._modalElement.querySelector(".modal__submit"),this._formModal=this._modalElement.querySelector(".modal__form"),this._inputs=this._formModal.querySelectorAll(".modal__input"),this._handleFormSubmit=t,this._handleSavingModifier=()=>{this._submitButton.classList.add("modal__submit_saving")}}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._formModal.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),this._handleSavingModifier()}))}resetSavingModifier(){this._submitButton.classList.remove("modal__submit_saving")}close(){super.close(),this._formModal.reset()}};const r=document.querySelector("#profile-edit-button"),n=document.querySelector(".profile__name"),a=document.querySelector(".profile__description"),o=document.querySelector("#profile-name-input"),l=document.querySelector("#profile-description-input"),d=document.querySelector("#card-template"),c=document.querySelector(".card__list"),h=document.querySelector("#add-card-button"),_=document.querySelector("#avatar-update-button"),u=document.querySelector(".profile__picture"),m={};var p;p={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit",inactiveButtonClass:"modal__submit_disabled",inputErrorClass:"modal__input_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(p.formSelector)).forEach((e=>{const s=new t(p,e),i=e.id;m[i]=s,s.enableValidation()}));const v=new i("#profile-edit-modal",(function(e){const{name:t,about:s}=e;L.updateProfile({name:t,about:s}).then((e=>{b.setUserInfo(e.name,e.about),v.close()})).catch((e=>{console.error(e)})).finally((()=>{v.resetSavingModifier()}))})),E=new i("#add-card-modal",(function(e){const{name:t,link:s}=e;L.addItem({name:t,link:s}).then((e=>{g.addItem(e),E.close()})).catch((e=>{console.error(e)})).finally((()=>{E.resetSavingModifier()}))})),f=new class extends s{constructor(e){super({modalSelector:e})}open(e){let{link:t,name:s}=e;this._modalElement.querySelector(".modal__preview-caption").textContent=s;const i=this._modalElement.querySelector(".modal__preview-image");i.src=t,i.alt=`${s}`,super.open()}}("#preview-image-modal"),k=new i("#avatar-modal",(function(e){const{avatar:t}=e;L.updateAvatar({avatar:t}).then((e=>{b.setUserAvatar(e.avatar),k.close()})).catch((e=>{console.error(e)})).finally((()=>{k.resetSavingModifier()}))})),S=new class extends s{constructor(e,t){super({modalSelector:e}),this._handleSubmit=t,this._submitButton=this._modalElement.querySelector(".modal__submit")}setEventListeners(){super.setEventListeners(),this._submitButton.addEventListener("click",(e=>{e.preventDefault(),this._handleSubmit(this._cardElement,this._cardId)}))}open(e,t){this._cardElement=e,this._cardId=t,super.open()}}("#confirmation-modal",y);v.setEventListeners(),E.setEventListeners(),f.setEventListeners(),S.setEventListeners(),k.setEventListeners();const b=new class{constructor(e,t,s){this._name=e,this._description=t,this._avatar=s}getUserInfo(){const e={};return e.profileName=this._name.textContent,e.profileDescription=this._description.textContent,e}setUserInfo(e,t){this._name.textContent=e,this._description.textContent=t}setUserAvatar(e){this._avatar.src=e}}(n,a,u),g=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=t}renderItems(e){e.forEach((e=>{this._renderer(e,this._container)}))}addItem(e){this._renderer(e,this._container)}}({items:[],renderer:function(t,s){const i=function(t){return new e({...t,handleDeleteClick:y,handleLikeCard:I},d,C,L,S).getView()}(t);s.prepend(i)}},c),L=new class{constructor(e){this.baseUrl=e.baseUrl,this.headers=e.headers}getAppInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`).catch((e=>{console.error(e)}))}getInitialCards(){return fetch(`${this.baseUrl}/cards`,{headers:this.headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this.baseUrl}/users/me`,{headers:this.headers}).then(this._checkResponse)}updateProfile(e){let{name:t,about:s}=e;return fetch(`${this.baseUrl}/users/me`,{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:s})}).then(this._checkResponse)}addItem(e){let{name:t,link:s}=e;return fetch(`${this.baseUrl}/cards`,{headers:this.headers,method:"POST",body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this.baseUrl}/cards/${e}`,{method:"DELETE",headers:this.headers}).then(this._checkResponse)}likeCard(e){return fetch(`${this.baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this.headers}).then(this._checkResponse)}unlikeCard(e){return fetch(`${this.baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this.headers}).then(this._checkResponse)}updateAvatar(e){let{avatar:t}=e;return fetch(`${this.baseUrl}/users/me/avatar`,{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"68ee5cc1-9a6e-42ad-87e2-f7856d8c88ba","Content-Type":"application/json"}});function C(e){f.open({link:e.link,name:e.name,id:e.id})}function y(e,t){L.deleteCard(t).then((()=>{e.remove(),S.close()})).catch((e=>console.error(e)))}function I(e,t){return t?L.unlikeCard(e):L.likeCard(e)}L.getAppInfo().then((e=>{let[t,s]=e;b.setUserInfo(t.name,t.about),b.setUserAvatar(t.avatar),g.renderItems(s)})).catch((e=>{console.error(e)})),r.addEventListener("click",(()=>{m["edit-profile-form"].resetValidation();const{profileName:e,profileDescription:t}=b.getUserInfo();o.value=e,l.value=t,v.open()})),h.addEventListener("click",(()=>{m["add-card-form"].resetValidation(),E.open()})),_.addEventListener("click",(()=>{m["avatar-form"].resetValidation(),k.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxHQUFJZ0csRUFBU2hHLElBRWpCLENBc0JBLFNBQVNvRixFQUFpQkYsRUFBYUMsR0FDckNwSixFQUNHdUwsV0FBV25DLEdBQ1gxSCxNQUFLLEtBQ0p5SCxFQUFZakgsU0FDWmpDLEVBQWtCc0YsT0FBTyxJQUUxQjFELE9BQU9DLEdBQVFDLFFBQVFDLE1BQU1GLElBQ2xDLENBRUEsU0FBU3ZCLEVBQWU2SSxFQUFROUksR0FDOUIsT0FBSUEsRUFDS04sRUFBSXlMLFdBQVdyQyxHQUVmcEosRUFBSXdMLFNBQVNwQyxFQUV4QixDQXpEQXBKLEVBQ0d3SyxhQUNBOUksTUFBSzdCLElBQXVCLElBQXJCK0wsRUFBVUMsR0FBTWhNLEVBQ3RCc0ksRUFBU0MsWUFBWXdELEVBQVMxTCxLQUFNMEwsRUFBUzVELE9BQzdDRyxFQUFTVyxjQUFjOEMsRUFBU2hELFFBQ2hDSixFQUFRdUIsWUFBWThCLEVBQU0sSUFFM0JoSyxPQUFPQyxJQUNOQyxRQUFRQyxNQUFNRixFQUFJLElBdUd0QjZFLEVBQWtCdkYsaUJBQWlCLFNBQVMsS0FDMUNpRyxFQUFlLHFCQUFxQnRDLGtCQUNwQyxNQUFNLFlBQUU2QixFQUFXLG1CQUFFQyxHQUF1QnNCLEVBQVNxQixjQUNyRDFDLEVBQWlCTixNQUFRSSxFQUN6QkcsRUFBd0JQLE1BQVFLLEVBQ2hDZ0IsRUFBYXRHLE1BQU0sSUFHckIyRixFQUFjOUYsaUJBQWlCLFNBQVMsS0FDdENpRyxFQUFlLGlCQUFpQnRDLGtCQUNoQ3VELEVBQWEvRyxNQUFNLElBR3JCNEYsRUFBYS9GLGlCQUFpQixTQUFTLEtBQ3JDaUcsRUFBZSxlQUFldEMsa0JBQzlCNEQsRUFBWXBILE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvTW9kYWxXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvTW9kYWxXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaGFuZGxlRGVsZXRlQ2xpY2ssIGlzTGlrZWQsIGhhbmRsZUxpa2VDYXJkIH0sXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgYXBpLFxuICAgIGNvbmZpcm1hdGlvbk1vZGFsXG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2lkID0gX2lkO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNhcmQgPSBoYW5kbGVMaWtlQ2FyZDtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5fYXBpID0gYXBpO1xuICAgIHRoaXMuX2lzTGlrZWQgPSBpc0xpa2VkO1xuICAgIHRoaXMuX2NvbmZpcm1hdGlvbk1vZGFsID0gY29uZmlybWF0aW9uTW9kYWw7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2NvbmZpcm1hdGlvbk1vZGFsLm9wZW4odGhpcy5fY2FyZEVsZW1lbnQsIHRoaXMuX2lkKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNhcmQodGhpcy5faWQsIHRoaXMuX2lzTGlrZWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuX2lzTGlrZWQgPSAhdGhpcy5faXNMaWtlZDtcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRTZWxlY3Rvci5jb250ZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saXN0LWl0ZW1cIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZE5hbWVFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jYXJkX19kZXNjcmlwdGlvbi10ZXh0XCJcbiAgICApO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcbiAgICApO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkTmFtZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWw7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgY29uc3QgaXNWYWxpZCA9IGlucHV0RWwudmFsaWRpdHkudmFsaWQ7XHJcblxyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QudG9nZ2xlKHRoaXMuX2lucHV0RXJyb3JDbGFzcywgIWlzVmFsaWQpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnRvZ2dsZSh0aGlzLl9lcnJvckNsYXNzLCAhaXNWYWxpZCk7XHJcblxyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSAhaXNWYWxpZCA/IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UgOiBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgY29uc3QgaGFzSW52YWxpZElucHV0ID0gdGhpcy5faGFzSW52YWxpZElucHV0KCk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcclxuICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyxcclxuICAgICAgaGFzSW52YWxpZElucHV0XHJcbiAgICApO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gaGFzSW52YWxpZElucHV0O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbCB7XHJcbiAgY29uc3RydWN0b3IoeyBtb2RhbFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UgPSB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlT3ZlcmxheUNsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBjbG9zZUJ1dHRvbnMgPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fY2xvc2VcIik7XHJcbiAgICBjbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XHJcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgTW9kYWwgZnJvbSBcIi4vTW9kYWwuanNcIjtcblxuY2xhc3MgTW9kYWxXaXRoSW1hZ2UgZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IG1vZGFsU2VsZWN0b3IgfSk7XG4gIH1cblxuICBvcGVuKHsgbGluaywgbmFtZSB9KSB7XG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctY2FwdGlvblwiKS50ZXh0Q29udGVudCA9XG4gICAgICBuYW1lO1xuICAgIGNvbnN0IGltYWdlID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIik7XG4gICAgaW1hZ2Uuc3JjID0gbGluaztcbiAgICBpbWFnZS5hbHQgPSBgJHtuYW1lfWA7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGFsV2l0aEltYWdlO1xuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XG5cbmNsYXNzIE1vZGFsV2l0aEZvcm0gZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IG1vZGFsU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdFwiKTtcbiAgICB0aGlzLl9mb3JtTW9kYWwgPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9mb3JtTW9kYWwucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faGFuZGxlU2F2aW5nTW9kaWZpZXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1vZGFsX19zdWJtaXRfc2F2aW5nXCIpO1xuICAgIH07XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRzID0ge307XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dHNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgaW5wdXRzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoaW5wdXRzKTtcbiAgICAgIHRoaXMuX2hhbmRsZVNhdmluZ01vZGlmaWVyKCk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldFNhdmluZ01vZGlmaWVyKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfX3N1Ym1pdF9zYXZpbmdcIik7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm1Nb2RhbC5yZXNldCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vZGFsV2l0aEZvcm07XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHsgdmFsaWRhdGlvblNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IE1vZGFsV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgTW9kYWxXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgTW9kYWxXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG4vLyBFbGVtZW50c1xuXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZS1pbnB1dFwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xuY29uc3QgY2FyZExpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlzdFwiKTtcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWJ1dHRvblwiKTtcbmNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLXVwZGF0ZS1idXR0b25cIik7XG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19waWN0dXJlXCIpO1xuXG4vLyBWYWxpZGF0b3JzXG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAodmFsaWRhdGlvblNldHRpbmdzKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtU2VsZWN0b3IpXG4gICk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBmb3JtRWxlbWVudCk7XG4gICAgY29uc3QgZm9ybUlkID0gZm9ybUVsZW1lbnQuaWQ7XG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybUlkXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvblNldHRpbmdzKTtcblxuLy8gQ2xhc3MgSW5zdGFuY2VzXG5cbmNvbnN0IHByb2ZpbGVNb2RhbCA9IG5ldyBNb2RhbFdpdGhGb3JtKFxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXRcbik7XG5jb25zdCBhZGRDYXJkTW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCBoYW5kbGVBZGRDYXJkU3VibWl0KTtcblxuY29uc3QgaW1hZ2VNb2RhbCA9IG5ldyBNb2RhbFdpdGhJbWFnZShcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xuXG5jb25zdCBhdmF0YXJNb2RhbCA9IG5ldyBNb2RhbFdpdGhGb3JtKFwiI2F2YXRhci1tb2RhbFwiLCBoYW5kbGVBdmF0YXJTdWJtaXQpO1xuXG5jb25zdCBjb25maXJtYXRpb25Nb2RhbCA9IG5ldyBNb2RhbFdpdGhDb25maXJtYXRpb24oXG4gIFwiI2NvbmZpcm1hdGlvbi1tb2RhbFwiLFxuICBoYW5kbGVDYXJkRGVsZXRlXG4pO1xuXG5wcm9maWxlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZENhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuaW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuY29uZmlybWF0aW9uTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmF2YXRhck1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVOYW1lLCBwcm9maWxlRGVzY3JpcHRpb24sIHByb2ZpbGVBdmF0YXIpO1xuXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oeyBpdGVtczogW10sIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sIGNhcmRMaXN0RWwpO1xuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiNjhlZTVjYzEtOWE2ZS00MmFkLTg3ZTItZjc4NTZkOGM4OGJhXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuYXBpXG4gIC5nZXRBcHBJbmZvKClcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuYWJvdXQpO1xuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcbiAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmRzKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH0pO1xuXG4vLyBGdW5jdGlvbnNcblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkRGF0YSkge1xuICBpbWFnZU1vZGFsLm9wZW4oe1xuICAgIGxpbms6IGNhcmREYXRhLmxpbmssXG4gICAgbmFtZTogY2FyZERhdGEubmFtZSxcbiAgICBpZDogY2FyZERhdGEuaWQsXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICB7XG4gICAgICAuLi5jYXJkRGF0YSxcbiAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiBoYW5kbGVDYXJkRGVsZXRlLFxuICAgICAgaGFuZGxlTGlrZUNhcmQ6IGhhbmRsZUxpa2VDYXJkLFxuICAgIH0sXG4gICAgY2FyZFRlbXBsYXRlLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgYXBpLFxuICAgIGNvbmZpcm1hdGlvbk1vZGFsXG4gICk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSwgbGlzdEVsKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gIGxpc3RFbC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZERlbGV0ZShjYXJkRWxlbWVudCwgY2FyZElkKSB7XG4gIGFwaVxuICAgIC5kZWxldGVDYXJkKGNhcmRJZClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIGNvbmZpcm1hdGlvbk1vZGFsLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTGlrZUNhcmQoY2FyZElkLCBpc0xpa2VkKSB7XG4gIGlmIChpc0xpa2VkKSB7XG4gICAgcmV0dXJuIGFwaS51bmxpa2VDYXJkKGNhcmRJZCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFwaS5saWtlQ2FyZChjYXJkSWQpO1xuICB9XG59XG5cbi8vIEV2ZW50IGhhbmRsZXJzXG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IGlucHV0VmFsdWVzO1xuICBhcGlcbiAgICAudXBkYXRlUHJvZmlsZSh7IG5hbWUsIGFib3V0IH0pIC8vIGRlc2NyaXB0aW9uP1xuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQpO1xuICAgICAgcHJvZmlsZU1vZGFsLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcHJvZmlsZU1vZGFsLnJlc2V0U2F2aW5nTW9kaWZpZXIoKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChpbnB1dFZhbHVlcykge1xuICBjb25zdCB7IG5hbWUsIGxpbmsgfSA9IGlucHV0VmFsdWVzO1xuICBhcGlcbiAgICAuYWRkSXRlbSh7IG5hbWUsIGxpbmsgfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBzZWN0aW9uLmFkZEl0ZW0ocmVzKTtcbiAgICAgIGFkZENhcmRNb2RhbC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGFkZENhcmRNb2RhbC5yZXNldFNhdmluZ01vZGlmaWVyKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhclN1Ym1pdChpbnB1dFZhbHVlcykge1xuICBjb25zdCB7IGF2YXRhciB9ID0gaW5wdXRWYWx1ZXM7XG4gIGFwaVxuICAgIC51cGRhdGVBdmF0YXIoeyBhdmF0YXIgfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xuICAgICAgYXZhdGFyTW9kYWwuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhdmF0YXJNb2RhbC5yZXNldFNhdmluZ01vZGlmaWVyKCk7XG4gICAgfSk7XG59XG5cbi8vIEV2ZW50IGxpc3RlbmVyc1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1tcImVkaXQtcHJvZmlsZS1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xuICBjb25zdCB7IHByb2ZpbGVOYW1lLCBwcm9maWxlRGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb247XG4gIHByb2ZpbGVNb2RhbC5vcGVuKCk7XG59KTtcblxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1tcImFkZC1jYXJkLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGFkZENhcmRNb2RhbC5vcGVuKCk7XG59KTtcblxuYXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzW1wiYXZhdGFyLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGF2YXRhck1vZGFsLm9wZW4oKTtcbn0pO1xuIiwiLy8gVmFsaWRhdGlvblxuY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdFwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXRfZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5leHBvcnQgeyB2YWxpZGF0aW9uU2V0dGluZ3MgfTtcbiIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbFwiO1xuXG5jbGFzcyBNb2RhbFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgbW9kYWxTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdFwiKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5fY2FyZEVsZW1lbnQsIHRoaXMuX2NhcmRJZCk7XG4gICAgfSk7XG4gIH1cblxuICBvcGVuKGNhcmRFbGVtZW50LCBjYXJkSWQpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGNhcmRFbGVtZW50O1xuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmRJZDtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9kYWxXaXRoQ29uZmlybWF0aW9uO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uLCBhdmF0YXIpIHtcbiAgICB0aGlzLl9uYW1lID0gcHJvZmlsZU5hbWU7XG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBwcm9maWxlRGVzY3JpcHRpb247XG4gICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgdXNlckluZm8gPSB7fTtcbiAgICB1c2VySW5mby5wcm9maWxlTmFtZSA9IHRoaXMuX25hbWUudGV4dENvbnRlbnQ7XG4gICAgdXNlckluZm8ucHJvZmlsZURlc2NyaXB0aW9uID0gdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XG4gICAgcmV0dXJuIHVzZXJJbmZvO1xuICB9XG5cbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG5cbiAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSwgdGhpcy5fY29udGFpbmVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0sIHRoaXMuX2NvbnRhaW5lcik7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgZ2V0QXBwSW5mbygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICB1cGRhdGVQcm9maWxlKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGFkZEl0ZW0oeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBsaWtlQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICB1bmxpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHVwZGF0ZUF2YXRhcih7IGF2YXRhciB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJhcGkiLCJjb25maXJtYXRpb25Nb2RhbCIsIm5hbWUiLCJsaW5rIiwiX2lkIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJpc0xpa2VkIiwiaGFuZGxlTGlrZUNhcmQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2FyZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9hcGkiLCJfaXNMaWtlZCIsIl9jb25maXJtYXRpb25Nb2RhbCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl9kZWxldGVCdXR0b24iLCJvcGVuIiwiX2NhcmRFbGVtZW50IiwiX2NhcmRJbWFnZUVsIiwidGhlbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJyZW1vdmUiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwicXVlcnlTZWxlY3RvciIsImNsb25lTm9kZSIsImdldFZpZXciLCJfY2FyZE5hbWVFbCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiYWRkIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc3VibWl0QnV0dG9uIiwiX2lucHV0RWxzIiwicXVlcnlTZWxlY3RvckFsbCIsIl90b2dnbGVJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJpc1ZhbGlkIiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsImV2ZXJ5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIk1vZGFsIiwibW9kYWxTZWxlY3RvciIsIl9tb2RhbEVsZW1lbnQiLCJkb2N1bWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImJ1dHRvbiIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9mb3JtTW9kYWwiLCJfaW5wdXRzIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlU2F2aW5nTW9kaWZpZXIiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXRTYXZpbmdNb2RpZmllciIsInJlc2V0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImNhcmRUZW1wbGF0ZSIsImNhcmRMaXN0RWwiLCJhZGRDYXJkQnV0dG9uIiwiYXZhdGFyQnV0dG9uIiwicHJvZmlsZUF2YXRhciIsImZvcm1WYWxpZGF0b3JzIiwidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJmb3JtSWQiLCJwcm9maWxlTW9kYWwiLCJNb2RhbFdpdGhGb3JtIiwiaW5wdXRWYWx1ZXMiLCJhYm91dCIsInVwZGF0ZVByb2ZpbGUiLCJyZXMiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiZmluYWxseSIsImFkZENhcmRNb2RhbCIsImFkZEl0ZW0iLCJzZWN0aW9uIiwiaW1hZ2VNb2RhbCIsImltYWdlIiwiYXZhdGFyTW9kYWwiLCJhdmF0YXIiLCJ1cGRhdGVBdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwiaGFuZGxlU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsImV2ZW50IiwiX2NhcmRJZCIsImNhcmRFbGVtZW50IiwiY2FyZElkIiwiaGFuZGxlQ2FyZERlbGV0ZSIsIl9kZXNjcmlwdGlvbiIsIl9hdmF0YXIiLCJnZXRVc2VySW5mbyIsImNvbnRhaW5lciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiY2FyZERhdGEiLCJsaXN0RWwiLCJjcmVhdGVDYXJkIiwicHJlcGVuZCIsIm9wdGlvbnMiLCJiYXNlVXJsIiwiaGVhZGVycyIsImdldEFwcEluZm8iLCJQcm9taXNlIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiX2NoZWNrUmVzcG9uc2UiLCJvayIsImpzb24iLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiX3JlZjIiLCJkZWxldGVDYXJkIiwibGlrZUNhcmQiLCJ1bmxpa2VDYXJkIiwiX3JlZjMiLCJhdXRob3JpemF0aW9uIiwidXNlckRhdGEiLCJjYXJkcyJdLCJzb3VyY2VSb290IjoiIn0=